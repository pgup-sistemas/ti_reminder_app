<!DOCTYPE html>
<html class="writer-html5" lang="pt_BR" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="O√©zios Normando - Equipe TI OSN" /><link rel="canonical" href="http://192.168.1.86:5000/docs/admin-guide/security-admin/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Gerenciamento de Seguran√ßa - TI OSN System - Documenta√ß√£o Oficial</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../stylesheets/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Gerenciamento de Seguran\u00e7a";
        var mkdocs_page_input_path = "admin-guide\\security-admin.md";
        var mkdocs_page_url = "/docs/admin-guide/security-admin/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> TI OSN System - Documenta√ß√£o Oficial
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Buscar documentos" aria-label="Buscar documentos" title="Digite o termo a ser buscado aqui" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Menu de navega√ß√£o">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">In√≠cio</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Guia do Usu√°rio</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../user-guide/overview/">Vis√£o Geral</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user-guide/security/">Seguran√ßa</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user-guide/tasks/">Atividades & Projetos</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user-guide/reminders/">Notifica√ß√µes Programadas</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user-guide/chamados/">Tickets & Suporte</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user-guide/equipment/">Gest√£o de Ativos</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user-guide/tutorials/">Base de Conhecimento</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user-guide/equipment/">Equipamentos</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user-guide/dashboard/">Dashboard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user-guide/rfid/">Sistema RFID</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user-guide/satisfaction/">Avalia√ß√£o de Satisfa√ß√£o</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user-guide/certifications/">Certifica√ß√µes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user-guide/performance/">Performance</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Guia do Administrador</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Gerenciamento de Seguran√ßa</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#visao-geral">Vis√£o Geral</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#gerenciamento-de-usuarios">üë• Gerenciamento de Usu√°rios</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#desbloquear-conta-de-usuario">Desbloquear Conta de Usu√°rio</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#via-interface-admin">Via Interface Admin</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#via-console-python">Via Console Python</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#via-sql-direto">Via SQL Direto</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#monitoramento-de-seguranca">üìä Monitoramento de Seguran√ßa</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#dashboard-de-seguranca">Dashboard de Seguran√ßa</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#1-contas-atualmente-bloqueadas">1. Contas Atualmente Bloqueadas</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#2-usuarios-com-multiplas-tentativas-falhas">2. Usu√°rios com M√∫ltiplas Tentativas Falhas</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#3-senhas-nao-alteradas-recentemente">3. Senhas N√£o Alteradas Recentemente</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#4-ultimos-logins">4. √öltimos Logins</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#5-contas-inativas">5. Contas Inativas</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#analise-de-logs-de-seguranca">üìù An√°lise de Logs de Seguran√ßa</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#localizacao">Localiza√ß√£o</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#comandos-uteis-powershell">Comandos √öteis (PowerShell)</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#ver-ultimas-50-linhas">Ver √∫ltimas 50 linhas</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#monitorar-em-tempo-real">Monitorar em tempo real</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#filtrar-logins-bem-sucedidos-hoje">Filtrar logins bem-sucedidos hoje</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#filtrar-tentativas-falhas">Filtrar tentativas falhas</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#contar-tentativas-por-ip">Contar tentativas por IP</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#contas-bloqueadas-hoje">Contas bloqueadas hoje</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#resposta-a-incidentes">üö® Resposta a Incidentes</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#cenario-1-conta-comprometida">Cen√°rio 1: Conta Comprometida</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cenario-2-ataque-de-forca-bruta">Cen√°rio 2: Ataque de For√ßa Bruta</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cenario-3-senhas-fracas-detectadas">Cen√°rio 3: Senhas Fracas Detectadas</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#politicas-de-seguranca-recomendadas">üìã Pol√≠ticas de Seguran√ßa Recomendadas</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#politica-de-senhas">Pol√≠tica de Senhas</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#politica-de-sessoes">Pol√≠tica de Sess√µes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#politica-de-auditoria">Pol√≠tica de Auditoria</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#configuracoes-avancadas">üîß Configura√ß√µes Avan√ßadas</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#ajustar-rate-limiting">Ajustar Rate Limiting</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ajustar-tempo-de-bloqueio">Ajustar Tempo de Bloqueio</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#configurar-https-obrigatorio">Configurar HTTPS Obrigat√≥rio</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#relatorios-de-seguranca">üìä Relat√≥rios de Seguran√ßa</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#script-de-relatorio-semanal">Script de Relat√≥rio Semanal</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#executar">Executar</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#treinamento-de-usuarios">üéì Treinamento de Usu√°rios</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#topicos-para-treinamento">T√≥picos para Treinamento</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#contatos-de-emergencia">üìû Contatos de Emerg√™ncia</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#checklist-mensal">‚úÖ Checklist Mensal</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../equipment-admin/">Equipamentos</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../performance-admin/">Performance</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../rfid-admin/">RFID</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../satisfaction-admin/">Satisfa√ß√£o</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../certifications-admin/">Certifica√ß√µes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Guia do Desenvolvedor</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../dev-guide/security-implementation/">Implementa√ß√£o de Seguran√ßa</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Menu de navega√ß√£o em dispositivo m√≥vel">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">TI OSN System - Documenta√ß√£o Oficial</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Documentos"></a></li>
          <li class="breadcrumb-item">Guia do Administrador</li>
      <li class="breadcrumb-item active">Gerenciamento de Seguran√ßa</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="gerenciamento-de-seguranca-guia-do-administrador">üîê Gerenciamento de Seguran√ßa - Guia do Administrador<a class="headerlink" href="#gerenciamento-de-seguranca-guia-do-administrador" title="Permanent link">&para;</a></h1>
<h2 id="visao-geral">Vis√£o Geral<a class="headerlink" href="#visao-geral" title="Permanent link">&para;</a></h2>
<p>Guia completo para administradores gerenciarem a seguran√ßa do TI OSN System v2.0, incluindo monitoramento, pol√≠ticas e resposta a incidentes.</p>
<hr />
<h2 id="gerenciamento-de-usuarios">üë• Gerenciamento de Usu√°rios<a class="headerlink" href="#gerenciamento-de-usuarios" title="Permanent link">&para;</a></h2>
<h3 id="desbloquear-conta-de-usuario">Desbloquear Conta de Usu√°rio<a class="headerlink" href="#desbloquear-conta-de-usuario" title="Permanent link">&para;</a></h3>
<p><strong>Cen√°rio:</strong> Usu√°rio bloqueado ap√≥s 5 tentativas falhas.</p>
<h4 id="via-interface-admin">Via Interface Admin<a class="headerlink" href="#via-interface-admin" title="Permanent link">&para;</a></h4>
<ol>
<li>Acesse <strong>Admin ‚Üí Gerenciar Usu√°rios</strong></li>
<li>Localize o usu√°rio bloqueado</li>
<li>Clique em <strong>Editar</strong></li>
<li>Limpe os campos:</li>
<li><code>locked_until</code> ‚Üí NULL</li>
<li><code>login_attempts</code> ‚Üí 0</li>
<li>Salve as altera√ß√µes</li>
</ol>
<h4 id="via-console-python">Via Console Python<a class="headerlink" href="#via-console-python" title="Permanent link">&para;</a></h4>
<pre><code class="language-python">from app import create_app, db
from app.models import User

app = create_app()
with app.app_context():
    user = User.query.filter_by(username='nome_usuario').first()
    user.locked_until = None
    user.login_attempts = 0
    db.session.commit()
    print(f&quot;Usu√°rio {user.username} desbloqueado!&quot;)
</code></pre>
<h4 id="via-sql-direto">Via SQL Direto<a class="headerlink" href="#via-sql-direto" title="Permanent link">&para;</a></h4>
<pre><code class="language-sql">UPDATE &quot;user&quot;
SET locked_until = NULL, login_attempts = 0
WHERE username = 'nome_usuario';
</code></pre>
<hr />
<h2 id="monitoramento-de-seguranca">üìä Monitoramento de Seguran√ßa<a class="headerlink" href="#monitoramento-de-seguranca" title="Permanent link">&para;</a></h2>
<h3 id="dashboard-de-seguranca">Dashboard de Seguran√ßa<a class="headerlink" href="#dashboard-de-seguranca" title="Permanent link">&para;</a></h3>
<p><strong>Queries √∫teis para monitoramento:</strong></p>
<h4 id="1-contas-atualmente-bloqueadas">1. Contas Atualmente Bloqueadas<a class="headerlink" href="#1-contas-atualmente-bloqueadas" title="Permanent link">&para;</a></h4>
<pre><code class="language-sql">SELECT 
    id,
    username,
    email,
    login_attempts,
    locked_until,
    EXTRACT(MINUTE FROM (locked_until - NOW())) as minutos_restantes
FROM &quot;user&quot;
WHERE locked_until &gt; NOW()
ORDER BY locked_until DESC;
</code></pre>
<h4 id="2-usuarios-com-multiplas-tentativas-falhas">2. Usu√°rios com M√∫ltiplas Tentativas Falhas<a class="headerlink" href="#2-usuarios-com-multiplas-tentativas-falhas" title="Permanent link">&para;</a></h4>
<pre><code class="language-sql">SELECT 
    username,
    email,
    login_attempts,
    last_failed_login,
    last_login
FROM &quot;user&quot;
WHERE login_attempts &gt; 0
ORDER BY login_attempts DESC, last_failed_login DESC
LIMIT 20;
</code></pre>
<h4 id="3-senhas-nao-alteradas-recentemente">3. Senhas N√£o Alteradas Recentemente<a class="headerlink" href="#3-senhas-nao-alteradas-recentemente" title="Permanent link">&para;</a></h4>
<pre><code class="language-sql">SELECT 
    username,
    email,
    password_changed_at,
    EXTRACT(DAY FROM (NOW() - password_changed_at)) as dias_sem_alterar
FROM &quot;user&quot;
WHERE 
    password_changed_at &lt; NOW() - INTERVAL '90 days'
    OR password_changed_at IS NULL
ORDER BY password_changed_at ASC NULLS FIRST;
</code></pre>
<h4 id="4-ultimos-logins">4. √öltimos Logins<a class="headerlink" href="#4-ultimos-logins" title="Permanent link">&para;</a></h4>
<pre><code class="language-sql">SELECT 
    username,
    email,
    last_login,
    last_failed_login,
    login_attempts
FROM &quot;user&quot;
ORDER BY last_login DESC NULLS LAST
LIMIT 50;
</code></pre>
<h4 id="5-contas-inativas">5. Contas Inativas<a class="headerlink" href="#5-contas-inativas" title="Permanent link">&para;</a></h4>
<pre><code class="language-sql">SELECT 
    username,
    email,
    last_login,
    created_at,
    ativo
FROM &quot;user&quot;
WHERE 
    last_login &lt; NOW() - INTERVAL '90 days'
    OR last_login IS NULL
ORDER BY last_login ASC NULLS FIRST;
</code></pre>
<hr />
<h2 id="analise-de-logs-de-seguranca">üìù An√°lise de Logs de Seguran√ßa<a class="headerlink" href="#analise-de-logs-de-seguranca" title="Permanent link">&para;</a></h2>
<h3 id="localizacao">Localiza√ß√£o<a class="headerlink" href="#localizacao" title="Permanent link">&para;</a></h3>
<pre><code>logs/security.log
</code></pre>
<h3 id="comandos-uteis-powershell">Comandos √öteis (PowerShell)<a class="headerlink" href="#comandos-uteis-powershell" title="Permanent link">&para;</a></h3>
<h4 id="ver-ultimas-50-linhas">Ver √∫ltimas 50 linhas<a class="headerlink" href="#ver-ultimas-50-linhas" title="Permanent link">&para;</a></h4>
<pre><code class="language-powershell">Get-Content logs\security.log -Tail 50
</code></pre>
<h4 id="monitorar-em-tempo-real">Monitorar em tempo real<a class="headerlink" href="#monitorar-em-tempo-real" title="Permanent link">&para;</a></h4>
<pre><code class="language-powershell">Get-Content logs\security.log -Wait
</code></pre>
<h4 id="filtrar-logins-bem-sucedidos-hoje">Filtrar logins bem-sucedidos hoje<a class="headerlink" href="#filtrar-logins-bem-sucedidos-hoje" title="Permanent link">&para;</a></h4>
<pre><code class="language-powershell">Get-Content logs\security.log | Select-String &quot;Login bem-sucedido&quot; | Select-String (Get-Date -Format &quot;yyyy-MM-dd&quot;)
</code></pre>
<h4 id="filtrar-tentativas-falhas">Filtrar tentativas falhas<a class="headerlink" href="#filtrar-tentativas-falhas" title="Permanent link">&para;</a></h4>
<pre><code class="language-powershell">Get-Content logs\security.log | Select-String &quot;Tentativa falha&quot;
</code></pre>
<h4 id="contar-tentativas-por-ip">Contar tentativas por IP<a class="headerlink" href="#contar-tentativas-por-ip" title="Permanent link">&para;</a></h4>
<pre><code class="language-powershell">Get-Content logs\security.log | 
    Select-String &quot;IP: (\d+\.\d+\.\d+\.\d+)&quot; | 
    ForEach-Object { $_.Matches.Groups[1].Value } | 
    Group-Object | 
    Sort-Object Count -Descending
</code></pre>
<h4 id="contas-bloqueadas-hoje">Contas bloqueadas hoje<a class="headerlink" href="#contas-bloqueadas-hoje" title="Permanent link">&para;</a></h4>
<pre><code class="language-powershell">Get-Content logs\security.log | Select-String &quot;Conta bloqueada&quot; | Select-String (Get-Date -Format &quot;yyyy-MM-dd&quot;)
</code></pre>
<hr />
<h2 id="resposta-a-incidentes">üö® Resposta a Incidentes<a class="headerlink" href="#resposta-a-incidentes" title="Permanent link">&para;</a></h2>
<h3 id="cenario-1-conta-comprometida">Cen√°rio 1: Conta Comprometida<a class="headerlink" href="#cenario-1-conta-comprometida" title="Permanent link">&para;</a></h3>
<p><strong>Sinais:</strong>
- Logins de IPs suspeitos
- Atividade fora do hor√°rio normal
- M√∫ltiplas tentativas de acesso</p>
<p><strong>A√ß√µes Imediatas:</strong></p>
<ol>
<li><strong>Desativar conta</strong></li>
</ol>
<pre><code class="language-sql">UPDATE &quot;user&quot;
SET ativo = false
WHERE username = 'usuario_comprometido';
</code></pre>
<ol>
<li><strong>Invalidar sess√µes</strong></li>
<li>Restart do servidor Flask (todas sess√µes expiram)</li>
<li>
<p>Ou aguarde timeout de 24h</p>
</li>
<li>
<p><strong>For√ßar reset de senha</strong></p>
</li>
</ol>
<pre><code class="language-sql">UPDATE &quot;user&quot;
SET 
    reset_token = NULL,
    reset_token_expiry = NULL,
    login_attempts = 0,
    locked_until = NULL
WHERE username = 'usuario_comprometido';
</code></pre>
<ol>
<li><strong>Notificar usu√°rio</strong></li>
<li>Email informando sobre atividade suspeita</li>
<li>
<p>Instru√ß√µes para reset de senha</p>
</li>
<li>
<p><strong>Investigar logs</strong></p>
</li>
</ol>
<pre><code class="language-powershell">Get-Content logs\security.log | Select-String &quot;usuario_comprometido&quot;
</code></pre>
<ol>
<li><strong>Documentar incidente</strong></li>
<li>Hor√°rio da detec√ß√£o</li>
<li>IPs suspeitos</li>
<li>A√ß√µes tomadas</li>
</ol>
<hr />
<h3 id="cenario-2-ataque-de-forca-bruta">Cen√°rio 2: Ataque de For√ßa Bruta<a class="headerlink" href="#cenario-2-ataque-de-forca-bruta" title="Permanent link">&para;</a></h3>
<p><strong>Sinais:</strong>
- M√∫ltiplas tentativas de login de um mesmo IP
- Tentativas em v√°rios usu√°rios
- Padr√£o automatizado</p>
<p><strong>A√ß√µes:</strong></p>
<ol>
<li><strong>Identificar IP atacante</strong></li>
</ol>
<pre><code class="language-powershell">Get-Content logs\security.log | 
    Select-String &quot;Tentativa falha&quot; | 
    Select-String &quot;IP: (\d+\.\d+\.\d+\.\d+)&quot; | 
    ForEach-Object { $_.Matches.Groups[1].Value } | 
    Group-Object | 
    Sort-Object Count -Descending | 
    Select-Object -First 10
</code></pre>
<ol>
<li><strong>Bloquear IP no firewall</strong></li>
</ol>
<pre><code class="language-powershell"># Windows Firewall
New-NetFirewallRule -DisplayName &quot;Block Attacker IP&quot; `
    -Direction Inbound `
    -RemoteAddress 192.168.1.100 `
    -Action Block
</code></pre>
<ol>
<li><strong>Revisar rate limiting</strong></li>
<li>Verificar se est√° ativo</li>
<li>
<p>Ajustar limites se necess√°rio</p>
</li>
<li>
<p><strong>Notificar equipe</strong></p>
</li>
<li>Documentar ataque</li>
<li>Compartilhar IPs suspeitos</li>
</ol>
<hr />
<h3 id="cenario-3-senhas-fracas-detectadas">Cen√°rio 3: Senhas Fracas Detectadas<a class="headerlink" href="#cenario-3-senhas-fracas-detectadas" title="Permanent link">&para;</a></h3>
<p><strong>A√ß√£o Preventiva:</strong></p>
<ol>
<li><strong>Identificar usu√°rios afetados</strong></li>
<li>Verificar logs de registro antigos</li>
<li>
<p>Contas criadas antes da valida√ß√£o forte</p>
</li>
<li>
<p><strong>For√ßar troca de senha</strong></p>
</li>
</ol>
<pre><code class="language-sql">-- Marcar senhas como expiradas (implementar campo)
UPDATE &quot;user&quot;
SET password_changed_at = '2020-01-01'
WHERE password_changed_at IS NULL
   OR password_changed_at &lt; '2025-01-23';
</code></pre>
<ol>
<li><strong>Comunicar pol√≠tica</strong></li>
<li>Email para todos usu√°rios</li>
<li>Explicar novos requisitos</li>
</ol>
<hr />
<h2 id="politicas-de-seguranca-recomendadas">üìã Pol√≠ticas de Seguran√ßa Recomendadas<a class="headerlink" href="#politicas-de-seguranca-recomendadas" title="Permanent link">&para;</a></h2>
<h3 id="politica-de-senhas">Pol√≠tica de Senhas<a class="headerlink" href="#politica-de-senhas" title="Permanent link">&para;</a></h3>
<p><strong>Requisitos obrigat√≥rios:</strong>
- ‚úÖ M√≠nimo 8 caracteres
- ‚úÖ 1 mai√∫scula, 1 min√∫scula, 1 n√∫mero, 1 especial
- ‚úÖ N√£o usar senhas comuns
- ‚úÖ Trocar a cada 90 dias (recomendado)</p>
<p><strong>Bloqueio:</strong>
- ‚úÖ 5 tentativas falhas = 15 minutos bloqueado
- ‚úÖ Reset autom√°tico ap√≥s per√≠odo</p>
<h3 id="politica-de-sessoes">Pol√≠tica de Sess√µes<a class="headerlink" href="#politica-de-sessoes" title="Permanent link">&para;</a></h3>
<p><strong>Configura√ß√£o atual:</strong>
- ‚è±Ô∏è Timeout: 24 horas de inatividade
- üç™ Cookies: HttpOnly, Secure (produ√ß√£o)
- üîí SameSite: Lax (dev) / Strict (prod)</p>
<h3 id="politica-de-auditoria">Pol√≠tica de Auditoria<a class="headerlink" href="#politica-de-auditoria" title="Permanent link">&para;</a></h3>
<p><strong>Logs mantidos:</strong>
- üìù Seguran√ßa: 10 arquivos x 10MB = 100MB
- üîÑ Rota√ß√£o autom√°tica
- üìä Revisar mensalmente</p>
<p><strong>Eventos cr√≠ticos:</strong>
1. Logins (sucesso/falha)
2. Bloqueios de conta
3. Resets de senha
4. Mudan√ßas de permiss√£o</p>
<hr />
<h2 id="configuracoes-avancadas">üîß Configura√ß√µes Avan√ßadas<a class="headerlink" href="#configuracoes-avancadas" title="Permanent link">&para;</a></h2>
<h3 id="ajustar-rate-limiting">Ajustar Rate Limiting<a class="headerlink" href="#ajustar-rate-limiting" title="Permanent link">&para;</a></h3>
<p><strong>Arquivo:</strong> <code>app/__init__.py</code></p>
<pre><code class="language-python">limiter = Limiter(
    key_func=get_remote_address,
    default_limits=[&quot;200 per day&quot;, &quot;50 per hour&quot;]  # Ajustar aqui
)
</code></pre>
<p><strong>Em rotas espec√≠ficas:</strong></p>
<pre><code class="language-python">@bp_auth.route(&quot;/login&quot;)
@limiter.limit(&quot;5 per minute&quot;)  # Ajustar limite
def login():
    # ...
</code></pre>
<h3 id="ajustar-tempo-de-bloqueio">Ajustar Tempo de Bloqueio<a class="headerlink" href="#ajustar-tempo-de-bloqueio" title="Permanent link">&para;</a></h3>
<p><strong>Arquivo:</strong> <code>app/auth.py</code> (linha ~152)</p>
<pre><code class="language-python">if user.login_attempts &gt;= 5:
    user.locked_until = datetime.utcnow() + timedelta(minutes=15)  # Ajustar aqui
</code></pre>
<h3 id="configurar-https-obrigatorio">Configurar HTTPS Obrigat√≥rio<a class="headerlink" href="#configurar-https-obrigatorio" title="Permanent link">&para;</a></h3>
<p><strong>Arquivo:</strong> <code>config.py</code></p>
<pre><code class="language-python">class ProductionConfig(Config):
    SESSION_COOKIE_SECURE = True  # For√ßa HTTPS
    FORCE_HTTPS = True
</code></pre>
<hr />
<h2 id="relatorios-de-seguranca">üìä Relat√≥rios de Seguran√ßa<a class="headerlink" href="#relatorios-de-seguranca" title="Permanent link">&para;</a></h2>
<h3 id="script-de-relatorio-semanal">Script de Relat√≥rio Semanal<a class="headerlink" href="#script-de-relatorio-semanal" title="Permanent link">&para;</a></h3>
<p><strong>Arquivo:</strong> <code>scripts/security_report.py</code> (criar)</p>
<pre><code class="language-python">&quot;&quot;&quot;Gerar relat√≥rio semanal de seguran√ßa&quot;&quot;&quot;
from app import create_app, db
from app.models import User
from datetime import datetime, timedelta

app = create_app()

with app.app_context():
    hoje = datetime.utcnow()
    semana_passada = hoje - timedelta(days=7)

    print(&quot;=&quot; * 60)
    print(&quot;RELAT√ìRIO DE SEGURAN√áA SEMANAL&quot;)
    print(&quot;=&quot; * 60)

    # Contas bloqueadas na semana
    bloqueadas = User.query.filter(
        User.locked_until.isnot(None)
    ).count()
    print(f&quot;\nüìä Contas bloqueadas atualmente: {bloqueadas}&quot;)

    # Usu√°rios com tentativas falhas
    com_falhas = User.query.filter(
        User.login_attempts &gt; 0
    ).count()
    print(f&quot;‚ö†Ô∏è  Usu√°rios com tentativas falhas: {com_falhas}&quot;)

    # Senhas antigas
    senhas_antigas = User.query.filter(
        (User.password_changed_at &lt; semana_passada) | 
        (User.password_changed_at.is_(None))
    ).count()
    print(f&quot;üîê Senhas n√£o alteradas h√° 90+ dias: {senhas_antigas}&quot;)

    # Total de usu√°rios
    total = User.query.count()
    ativos = User.query.filter_by(ativo=True).count()
    print(f&quot;\nüë• Total de usu√°rios: {total}&quot;)
    print(f&quot;‚úÖ Usu√°rios ativos: {ativos}&quot;)

    print(&quot;\n&quot; + &quot;=&quot; * 60)
</code></pre>
<h3 id="executar">Executar<a class="headerlink" href="#executar" title="Permanent link">&para;</a></h3>
<pre><code class="language-bash">python scripts/security_report.py
</code></pre>
<hr />
<h2 id="treinamento-de-usuarios">üéì Treinamento de Usu√°rios<a class="headerlink" href="#treinamento-de-usuarios" title="Permanent link">&para;</a></h2>
<h3 id="topicos-para-treinamento">T√≥picos para Treinamento<a class="headerlink" href="#topicos-para-treinamento" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Cria√ß√£o de Senhas Fortes</strong></li>
<li>Use gerenciador de senhas</li>
<li>Evite informa√ß√µes pessoais</li>
<li>
<p>Unique por servi√ßo</p>
</li>
<li>
<p><strong>Phishing e Engenharia Social</strong></p>
</li>
<li>Verificar remetente de emails</li>
<li>N√£o clicar em links suspeitos</li>
<li>
<p>Confirmar solicita√ß√µes por outro canal</p>
</li>
<li>
<p><strong>Boas Pr√°ticas</strong></p>
</li>
<li>Logout em PCs compartilhados</li>
<li>N√£o compartilhar credenciais</li>
<li>Reportar atividades suspeitas</li>
</ol>
<hr />
<h2 id="contatos-de-emergencia">üìû Contatos de Emerg√™ncia<a class="headerlink" href="#contatos-de-emergencia" title="Permanent link">&para;</a></h2>
<p><strong>Incidente de Seguran√ßa:</strong>
- üö® Email: security@ti-osn.com
- üì± Telefone: (xx) xxxx-xxxx
- üí¨ Slack: #security-incidents</p>
<p><strong>Suporte T√©cnico:</strong>
- üìß Email: suporte@ti-osn.com
- üé´ Sistema de chamados interno</p>
<hr />
<h2 id="checklist-mensal">‚úÖ Checklist Mensal<a class="headerlink" href="#checklist-mensal" title="Permanent link">&para;</a></h2>
<ul>
<li>[ ] Revisar logs de seguran√ßa</li>
<li>[ ] Verificar contas com m√∫ltiplas tentativas falhas</li>
<li>[ ] Auditar permiss√µes de usu√°rios admin/TI</li>
<li>[ ] Verificar contas inativas h√° mais de 90 dias</li>
<li>[ ] Testar processo de reset de senha</li>
<li>[ ] Backup de logs de seguran√ßa</li>
<li>[ ] Atualizar depend√™ncias de seguran√ßa</li>
<li>[ ] Gerar relat√≥rio mensal</li>
</ul>
<hr />
<p><strong>√öltima atualiza√ß√£o:</strong> Janeiro 2025<br />
<strong>Vers√£o:</strong> 2.0 - Seguran√ßa Enterprise<br />
<strong>Respons√°vel:</strong> Administradores do Sistema</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Navega√ß√£o no rodap√©">
        <a href="../../user-guide/performance/" class="btn btn-neutral float-left" title="Performance"><span class="icon icon-circle-arrow-left"></span> Anterior</a>
        <a href="../equipment-admin/" class="btn btn-neutral float-right" title="Equipamentos">Seguinte <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Constru√≠do com <a href="https://www.mkdocs.org/">MkDocs</a> usando <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provido por <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Vers√µes">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../../user-guide/performance/" style="color: #fcfcfc">&laquo; Anterior</a></span>
    
    
      <span><a href="../equipment-admin/" style="color: #fcfcfc">Seguinte &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../javascripts/extra.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
